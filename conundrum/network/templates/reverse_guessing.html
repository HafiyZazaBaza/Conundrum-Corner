<!DOCTYPE html>
<html>
<head>
    <title>Reverse Guessing Game</title>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
    <h1>Reverse Guessing Game</h1>

    <button onclick="startRound()">Start Round</button>
    <div id="answer"></div>

    <h3>Submit a Question</h3>
    <input id="questionInput" placeholder="Write your question">
    <button onclick="submitQuestion()">Submit</button>

    <h3>Guess the Answer</h3>
    <input id="guessInput" placeholder="Your guess">
    <button onclick="submitGuess()">Guess</button>

    <div id="gameLog"></div>

    <script>
        const socket = io();
        const room = "reverse_room";

        function startRound() {
            socket.emit("reverse_start_round", { room });
        }

        function submitQuestion() {
            const question = document.getElementById("questionInput").value;
            socket.emit("reverse_submit_question", { room, question });
        }

        function submitGuess() {
            const guess = document.getElementById("guessInput").value;
            socket.emit("reverse_guess_answer", { room, guess });
        }

        // Listen to events
        socket.on("reverse_new_answer", data => {
            document.getElementById("answer").innerText = "Answer: " + data.answer;
        });

        socket.on("reverse_ask_player", data => {
            log(`${data.target}, guess this: ${data.question} (from ${data.author})`);
        });

        socket.on("reverse_correct", data => {
            log(`${data.guesser} guessed correctly! Scores: ${JSON.stringify(data.scores)}`);
        });

        socket.on("reverse_wrong", data => {
            log(`${data.username} guessed wrong. Correct answer was ${data.answer}`);
        });

        function log(msg) {
            document.getElementById("gameLog").innerHTML += "<p>" + msg + "</p>";
        }
    </script>
</body>
</html>
